<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0078)http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(v=vs.85).aspx -->
<html xmlns="http://www.w3.org/1999/xhtml"><head id="Head" xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="./ReadFile function_files/Combined.css" xmlns="http://www.w3.org/1999/xhtml"><title>ReadFile function</title><meta name="DCS.dcsuri" content="/en-us/library/windows/desktop/aa365467(d=default,l=en-us,v=vs.85).aspx"><meta name="NormalizedUrl" content="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(d=default,l=en-us,v=vs.85).aspx"><meta name="VotingContextUrl" content="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(d=default,l=en-us,v=vs.85).aspx"><meta name="MN" content="75AC813D-5:55:03 PM"><meta name="Search.ShortId" content="aa365467"><meta name="Ms.Locale" content="en-us"><meta http-equiv="X-UA-Compatible" content="IE=9"><script type="text/javascript" async="" src="./ReadFile function_files/ms2.js"></script><script src="./ReadFile function_files/jquery-1.7.1.min.js" type="text/javascript" xml:space="preserve"></script><link rel="canonical" href="./ReadFile function_files/ReadFile function.htm" xmlns="http://www.w3.org/1999/xhtml"><link rel="alternate" media="print" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(d=printer,v=vs.85).aspx" type="text/html" xmlns="http://www.w3.org/1999/xhtml"><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/document_iterator.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/find_proxy.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/get_html_text.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/global_constants.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/name_injection_builder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/number_injection_builder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/string_finder.js"></script><script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/change_sink.js"></script><meta name="document_iterator.js"><meta name="find_proxy.js"><meta name="get_html_text.js"><meta name="global_constants.js"><meta name="name_injection_builder.js"><meta name="number_injection_builder.js"><meta name="string_finder.js"><meta name="change_sink.js"></head>
<body>
    <div class="MetricsContainer">
        <div class="WebtrendsContainer">
            

<script type="text/javascript" language="javascript">
//<![CDATA[
  var literalNormalizedUrl = '/en-us/library/windows/desktop/aa365467(d=default,l=en-us,v=vs.85).aspx';
  var wt_nvr_ru = 'WT_NVR_RU';
  var wt_fpcdom = '.microsoft.com';
  var wt_domlist = 'msdn.microsoft.com';
  var wt_pathlist = '';
  var wt_paramlist = 'DCSext.mtps_devcenter';
  var wt_siteid = 'MSDN';
  var gDomain = 'm.webtrends.com';
  var gDcsId = 'dcsmgru7m99k7mqmgrhudo0k8_8c6m';
  var gFpc = 'WT_FPC';
  if (document.cookie.indexOf(gFpc + "=") == -1) {
    document.write("<scr" + "ipt type='text/javascript' src='" + "http" + (window.location.protocol.indexOf('https:') == 0 ? 's' : '') + "://" + gDomain + "/" + gDcsId + "/wtid.js" + "'><\\/scr" + "ipt>");
  }
  var detectedLocale = 'en-us';
  var wtsp = '_msdn_';
  var gTrackEvents = '0';
/*]]>*/
</script>
<noscript>&lt;div&gt;&lt;img alt="DCSIMG" id="Img1" width="1" height="1" src="http://m.webtrends.com/dcsmgru7m99k7mqmgrhudo0k8_8c6m/njs.gif?dcsuri=/nojavascript&amp;amp;WT.js=No" /&gt;&lt;/div&gt;</noscript>

</div>
        <div class="OmnitureContainer">
            



<script type="text/javascript">
  var omni_guid = '521400e0-a60b-42af-a389-0557ef9b23e7'; 
</script>



<noscript>
    &lt;a href="http://www.omniture.com" title="Web Analytics"&gt;
        &lt;img src="//msstonojsmsdn.112.2o7.net/b/ss/msstonojsmsdn/1/H.20.2--NS/0" height="1" width="1" border="0" alt="" /&gt;&lt;/a&gt;
</noscript>

</div>
    </div>
    <script language="javascript" type="text/javascript" src="./ReadFile function_files/broker.js"></script>
    <div class="pageContainer">        
        <div class="headerContainer">
            
<div class="header">
    
<div class="GlobalBar">
  <div class="PassportScarab">
    
    <a id="idPPScarab" class="scarabLink" href="https://login.live.com/login.srf?wa=wsignin1.0&rpsnv=11&ct=1334512503&rver=6.0.5276.0&wp=MCLBI&wlcxt=msdn%24msdn%24msdn&wreply=http%3a%2f%2fmsdn.microsoft.com%2fen-us%2flibrary%2fwindows%2fdesktop%2faa365467%2528v%3dvs.85%2529.aspx&lc=1033&id=254354&mkt=en-US"><span id="idPPScarabSIT">Sign in</span></a>
  </div>
</div>

    <div class="Clear"></div>
    
<div class="Search">
    <div class="SearchBox">
      <form id="HeaderSearchForm" method="get" action="http://social.msdn.microsoft.com/search/en-us/windows/desktop" onsubmit="return SearchBoxOnSubmit(&#39;Search Dev Center with Bing&#39;);">
        <input name="query" id="HeaderSearchTextBox" class="TextBoxSearchLoaded" type="text" value="Search Dev Center with Bing" maxlength="100" title="Search Dev Center with Bing" onfocus="WatermarkFocus(this, &#39;Search Dev Center with Bing&#39;, &#39;TextBoxSearch&#39;)" onblur="WatermarkBlur(this, &#39;Search Dev Center with Bing&#39;, &#39;TextBoxSearchLoaded&#39;)">
        <input name="Refinement" type="hidden" value="181">
        <input id="HeaderSearchButton" value="" class="SearchButton" type="submit" title="Search">
        <input id="HeaderSearchButtonHidden" value="" style="display:none;" type="submit">       
      </form>
    </div>
</div>

    <div class="siteLogo">
      <a href="http://msdn.microsoft.com/en-us/windows/desktop" title="Dev Center -  Desktop">
        <img src="./ReadFile function_files/6b67f1378af22a94e4336f5bfdd136bd.png" alt="Dev Center -  Desktop" title="Dev Center -  Desktop">
        <span>Dev Center - &nbsp;Desktop</span>
      </a>
    </div>
    <div class="tabs">
      <a href="http://msdn.microsoft.com/en-us/windows/desktop" title="Home">Home</a><a href="https://sysdev.microsoft.com/en-us/desktop" title="Dashboard">Dashboard</a><a class="highlightedTab" href="http://msdn.microsoft.com/en-us/library/windows/desktop" title="Learn">Learn</a><a href="http://code.msdn.microsoft.com/en-us/windowsdesktop" title="Samples">Samples</a><a href="http://msdn.microsoft.com/en-us/windows/desktop/aa904949" title="Downloads">Downloads</a><a href="http://msdn.microsoft.com/en-us/windows/desktop/aa904945" title="Community">Community</a>
    </div>
    <div class="masthead_hr"></div>
</div>

        </div>        
        <div class="breadcrumbContainer">
            
<div class="breadCrumb">
   <a class="breadCrumbEyebrowLink" href="http://msdn.microsoft.com/en-us/windows/desktop/" title="Dev Center - Desktop">Dev Center - Desktop</a> <span><span class="breadCrumbEyebrowSeperator">&gt;</span> <a class="breadCrumbEyebrowLink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/" title="Learn">Learn</a></span> <span><span class="breadCrumbEyebrowSeperator">&gt;</span> <a class="breadCrumbEyebrowLink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh447209(v=vs.85).aspx" title="Reference">Reference</a></span> <span><span class="breadCrumbEyebrowSeperator">&gt;</span> <a class="breadCrumbEyebrowLink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/ee663264(v=vs.85).aspx" title="Data Access and Storage">Data Access and Storage</a></span> <span><span class="breadCrumbEyebrowSeperator">&gt;</span> <a class="breadCrumbEyebrowLink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364407(v=vs.85).aspx" title="Local File Systems">Local File Systems</a></span> <span><span class="breadCrumbEyebrowSeperator">&gt;</span> <a class="breadCrumbEyebrowLink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364229(v=vs.85).aspx" title="File Management">File Management</a></span> <span><span class="breadCrumbEyebrowSeperator">&gt;</span> <a class="breadCrumbEyebrowLink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364233(v=vs.85).aspx" title="File Management Reference">File Management Reference</a></span> <span><span class="breadCrumbEyebrowSeperator">&gt;</span> <a class="breadCrumbEyebrowLink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364232(v=vs.85).aspx" title="File Management Functions">File Management Functions</a></span> <span><span class="breadCrumbEyebrowSeperator">&gt;</span> <a class="breadCrumbEyebrowLink" href="./ReadFile function_files/ReadFile function.htm" title="ReadFile">ReadFile</a></span>
</div>

        </div>        
        <h1 id="TopicTitle">
          ReadFile function
        </h1>
        <div id="Navigation" class="navigationContainer" style="width:190px">
          
<div class="navigation">
<div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363770(v=vs.85).aspx" title="AddUsersToEncryptedFile">AddUsersToEncryptedFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363781(v=vs.85).aspx" title="AreFileApisANSI">AreFileApisANSI</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363791(v=vs.85).aspx" title="CancelIo">CancelIo</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363792(v=vs.85).aspx" title="CancelIoEx">CancelIoEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363794(v=vs.85).aspx" title="CancelSynchronousIo">CancelSynchronousIo</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363807(v=vs.85).aspx" title="CheckNameLegalDOS8Dot3">CheckNameLegalDOS8Dot3</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363839(v=vs.85).aspx" title="CloseEncryptedFileRaw">CloseEncryptedFileRaw</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363851(v=vs.85).aspx" title="CopyFile">CopyFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh449404(v=vs.85).aspx" title="CopyFile2">CopyFile2</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh449407(v=vs.85).aspx" title="CopyFile2ProgressRoutine">CopyFile2ProgressRoutine</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363852(v=vs.85).aspx" title="CopyFileEx">CopyFileEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363853(v=vs.85).aspx" title="CopyFileTransacted">CopyFileTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363854(v=vs.85).aspx" title="CopyProgressRoutine">CopyProgressRoutine</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx" title="CreateFile">CreateFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh449422(v=vs.85).aspx" title="CreateFile2">CreateFile2</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363859(v=vs.85).aspx" title="CreateFileTransacted">CreateFileTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363860(v=vs.85).aspx" title="CreateHardLink">CreateHardLink</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363861(v=vs.85).aspx" title="CreateHardLinkTransacted">CreateHardLinkTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363862(v=vs.85).aspx" title="CreateIoCompletionPort">CreateIoCompletionPort</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363866(v=vs.85).aspx" title="CreateSymbolicLink">CreateSymbolicLink</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363867(v=vs.85).aspx" title="CreateSymbolicLinkTransacted">CreateSymbolicLinkTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363903(v=vs.85).aspx" title="DecryptFile">DecryptFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363915(v=vs.85).aspx" title="DeleteFile">DeleteFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363916(v=vs.85).aspx" title="DeleteFileTransacted">DeleteFileTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364011(v=vs.85).aspx" title="DuplicateEncryptionInfoFile">DuplicateEncryptionInfoFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364021(v=vs.85).aspx" title="EncryptFile">EncryptFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364023(v=vs.85).aspx" title="EncryptionDisable">EncryptionDisable</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364043(v=vs.85).aspx" title="ExportCallback">ExportCallback</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364051(v=vs.85).aspx" title="FileEncryptionStatus">FileEncryptionStatus</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364052(v=vs.85).aspx" title="FileIOCompletionRoutine">FileIOCompletionRoutine</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364413(v=vs.85).aspx" title="FindClose">FindClose</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418(v=vs.85).aspx" title="FindFirstFile">FindFirstFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364419(v=vs.85).aspx" title="FindFirstFileEx">FindFirstFileEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364420(v=vs.85).aspx" title="FindFirstFileNameTransactedW">FindFirstFileNameTransactedW</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364421(v=vs.85).aspx" title="FindFirstFileNameW">FindFirstFileNameW</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364422(v=vs.85).aspx" title="FindFirstFileTransacted">FindFirstFileTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364423(v=vs.85).aspx" title="FindFirstStreamTransactedW">FindFirstStreamTransactedW</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364424(v=vs.85).aspx" title="FindFirstStreamW">FindFirstStreamW</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428(v=vs.85).aspx" title="FindNextFile">FindNextFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364429(v=vs.85).aspx" title="FindNextFileNameW">FindNextFileNameW</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364430(v=vs.85).aspx" title="FindNextStreamW">FindNextStreamW</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364439(v=vs.85).aspx" title="FlushFileBuffers">FlushFileBuffers</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364553(v=vs.85).aspx" title="FreeEncryptionCertificateHashList">FreeEncryptionCertificateHashList</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364819(v=vs.85).aspx" title="GetBinaryType">GetBinaryType</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364930(v=vs.85).aspx" title="GetCompressedFileSize">GetCompressedFileSize</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364933(v=vs.85).aspx" title="GetCompressedFileSizeTransacted">GetCompressedFileSizeTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364941(v=vs.85).aspx" title="GetExpandedName">GetExpandedName</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364944(v=vs.85).aspx" title="GetFileAttributes">GetFileAttributes</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364946(v=vs.85).aspx" title="GetFileAttributesEx">GetFileAttributesEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364949(v=vs.85).aspx" title="GetFileAttributesTransacted">GetFileAttributesTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364951(v=vs.85).aspx" title="GetFileBandwidthReservation">GetFileBandwidthReservation</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364952(v=vs.85).aspx" title="GetFileInformationByHandle">GetFileInformationByHandle</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364953(v=vs.85).aspx" title="GetFileInformationByHandleEx">GetFileInformationByHandleEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364955(v=vs.85).aspx" title="GetFileSize">GetFileSize</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364957(v=vs.85).aspx" title="GetFileSizeEx">GetFileSizeEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364960(v=vs.85).aspx" title="GetFileType">GetFileType</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364962(v=vs.85).aspx" title="GetFinalPathNameByHandle">GetFinalPathNameByHandle</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364963(v=vs.85).aspx" title="GetFullPathName">GetFullPathName</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364966(v=vs.85).aspx" title="GetFullPathNameTransacted">GetFullPathNameTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364980(v=vs.85).aspx" title="GetLongPathName">GetLongPathName</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364982(v=vs.85).aspx" title="GetLongPathNameTransacted">GetLongPathNameTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364986(v=vs.85).aspx" title="GetQueuedCompletionStatus">GetQueuedCompletionStatus</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364988(v=vs.85).aspx" title="GetQueuedCompletionStatusEx">GetQueuedCompletionStatusEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364989(v=vs.85).aspx" title="GetShortPathName">GetShortPathName</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364991(v=vs.85).aspx" title="GetTempFileName">GetTempFileName</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364992(v=vs.85).aspx" title="GetTempPath">GetTempPath</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365148(v=vs.85).aspx" title="ImportCallback">ImportCallback</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365202(v=vs.85).aspx" title="LockFile">LockFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365203(v=vs.85).aspx" title="LockFileEx">LockFileEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365221(v=vs.85).aspx" title="LZClose">LZClose</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365223(v=vs.85).aspx" title="LZCopy">LZCopy</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365224(v=vs.85).aspx" title="LZInit">LZInit</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365225(v=vs.85).aspx" title="LZOpenFile">LZOpenFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365226(v=vs.85).aspx" title="LZRead">LZRead</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365227(v=vs.85).aspx" title="LZSeek">LZSeek</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365239(v=vs.85).aspx" title="MoveFile">MoveFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240(v=vs.85).aspx" title="MoveFileEx">MoveFileEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365241(v=vs.85).aspx" title="MoveFileTransacted">MoveFileTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365242(v=vs.85).aspx" title="MoveFileWithProgress">MoveFileWithProgress</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365429(v=vs.85).aspx" title="OpenEncryptedFileRaw">OpenEncryptedFileRaw</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365430(v=vs.85).aspx" title="OpenFile">OpenFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365432(v=vs.85).aspx" title="OpenFileById">OpenFileById</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365458(v=vs.85).aspx" title="PostQueuedCompletionStatus">PostQueuedCompletionStatus</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365463(v=vs.85).aspx" title="QueryRecoveryAgentsOnEncryptedFile">QueryRecoveryAgentsOnEncryptedFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365464(v=vs.85).aspx" title="QueryUsersOnEncryptedFile">QueryUsersOnEncryptedFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365466(v=vs.85).aspx" title="ReadEncryptedFileRaw">ReadEncryptedFileRaw</a></div><div class="selected"><a title="ReadFile">ReadFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365468(v=vs.85).aspx" title="ReadFileEx">ReadFileEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365469(v=vs.85).aspx" title="ReadFileScatter">ReadFileScatter</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365495(v=vs.85).aspx" title="RemoveUsersFromEncryptedFile">RemoveUsersFromEncryptedFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365497(v=vs.85).aspx" title="ReOpenFile">ReOpenFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365512(v=vs.85).aspx" title="ReplaceFile">ReplaceFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365527(v=vs.85).aspx" title="SearchPath">SearchPath</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365531(v=vs.85).aspx" title="SetEndOfFile">SetEndOfFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365533(v=vs.85).aspx" title="SetFileApisToANSI">SetFileApisToANSI</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365534(v=vs.85).aspx" title="SetFileApisToOEM">SetFileApisToOEM</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365535(v=vs.85).aspx" title="SetFileAttributes">SetFileAttributes</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365536(v=vs.85).aspx" title="SetFileAttributesTransacted">SetFileAttributesTransacted</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365537(v=vs.85).aspx" title="SetFileBandwidthReservation">SetFileBandwidthReservation</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365538(v=vs.85).aspx" title="SetFileCompletionNotificationModes">SetFileCompletionNotificationModes</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365539(v=vs.85).aspx" title="SetFileInformationByHandle">SetFileInformationByHandle</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365540(v=vs.85).aspx" title="SetFileIoOverlappedRange">SetFileIoOverlappedRange</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365541(v=vs.85).aspx" title="SetFilePointer">SetFilePointer</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365542(v=vs.85).aspx" title="SetFilePointerEx">SetFilePointerEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365543(v=vs.85).aspx" title="SetFileShortName">SetFileShortName</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365544(v=vs.85).aspx" title="SetFileValidData">SetFileValidData</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/dd266735(v=vs.85).aspx" title="SetSearchPathMode">SetSearchPathMode</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365549(v=vs.85).aspx" title="SetUserFileEncryptionKey">SetUserFileEncryptionKey</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365715(v=vs.85).aspx" title="UnlockFile">UnlockFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365716(v=vs.85).aspx" title="UnlockFileEx">UnlockFileEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365743(v=vs.85).aspx" title="Wow64DisableWow64FsRedirection">Wow64DisableWow64FsRedirection</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365744(v=vs.85).aspx" title="Wow64EnableWow64FsRedirection">Wow64EnableWow64FsRedirection</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365745(v=vs.85).aspx" title="Wow64RevertWow64FsRedirection">Wow64RevertWow64FsRedirection</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365746(v=vs.85).aspx" title="WriteEncryptedFileRaw">WriteEncryptedFileRaw</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365747(v=vs.85).aspx" title="WriteFile">WriteFile</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365748(v=vs.85).aspx" title="WriteFileEx">WriteFileEx</a></div><div><a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365749(v=vs.85).aspx" title="WriteFileGather">WriteFileGather</a></div>
</div>

        </div>        
        <div class="tocResizeContainer">
            
    <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(v=vs.85).aspx#" onclick="onIncreaseToc()" class="tocResize" id="TocResize" style="left:193px;">
    <img id="ResizeImageIncrease" class="nav_resize_open" src="./ReadFile function_files/5b56267bbca66252c725ca7ab4fdea87.png" onmousedown="onIncreaseToc()" title="Expand" alt="Expand">
    <img id="ResizeImageReset" class="nav_resize_close" src="./ReadFile function_files/5b56267bbca66252c725ca7ab4fdea87.png" style="display:none" onmousedown="onResetToc()" title="Minimize" alt="Minimize">
  
</a>
<input type="hidden" id="hidTocDirection" value="ltr">

        </div>        
        <div class="contentWrapper">
          <div class="contentHeaderContainer">
            
            
            




<div id="ratingCounter">
    <span id="rcA" class="ratingText">
        45 out of 122 rated this helpful <a id="rateThisTopic" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(v=vs.85).aspx#feedback" title="Rate this topic">Rate this topic</a>
        
    </span>
</div>

            
          </div>
          <div class="topicContainer">
              
<div class="topic" xmlns="http://www.w3.org/1999/xhtml">
  <div class="majorTitle">
    
  </div>
  <h1 class="title">ReadFile function</h1>
  
  <div id="mainSection">
<div class="clsServerSDKContent">

</div>
<p><strong>Applies to: </strong>desktop apps | Metro style apps</p>
<p>Reads data from the specified file or input/output (I/O) device. Reads occur at the position specified 
    by the file pointer if supported by the device.</p>
<p>This function is designed for both synchronous and asynchronous operations. For a similar function designed 
    solely for asynchronous operation, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365468(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">ReadFileEx</strong></a>.</p>
<h3>Syntax</h3>

<div class="codeSnippetContainer" xmlns="">
    <div class="codeSnippetContainerTabs">
        
    </div>
    <div class="codeSnippetContainerCodeContainer">
        <div class="codeSnippetToolBar">
            <div class="codeSnippetToolBarText">
                <a name="CodeSnippetCopyLink" style="display: none;" title="Copy to clipboard." href="javascript:CodeSnippet_CopyCode('CodeSnippetContainerCode_9ffc217f-ae62-41f3-a80d-62d70201857a');">Copy</a>
            </div>
        </div>
        <div id="CodeSnippetContainerCode_9ffc217f-ae62-41f3-a80d-62d70201857a" class="codeSnippetContainerCode" dir="ltr">
            <div style="color:Black;"><pre>BOOL WINAPI ReadFile(
  __in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HANDLE hFile,
  __out&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LPVOID lpBuffer,
  __in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DWORD nNumberOfBytesToRead,
  __out_opt&nbsp;&nbsp;&nbsp;&nbsp;LPDWORD lpNumberOfBytesRead,
  __inout_opt&nbsp;&nbsp;LPOVERLAPPED lpOverlapped
);
</pre></div>
            
        </div>
    </div>
</div>

<h3>Parameters</h3>
<dl>
<dt><em>hFile</em> [in]</dt>
<dd>
<p>A handle to the device (for example, a file, file stream, physical disk, volume,  console buffer, tape drive, 
       socket, communications resource, mailslot, or  pipe).</p>
<p>The <em>hFile</em> parameter must have been created with read access. For more information, 
       see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa446632(v=vs.85).aspx">Generic Access Rights</a> and 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364399(v=vs.85).aspx">File Security and Access Rights</a>.</p>
<p>For asynchronous read operations, <em>hFile</em> can be any handle that is opened with the 
       <strong>FILE_FLAG_OVERLAPPED</strong> flag by the 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CreateFile</strong></a> function, or a socket handle returned by the 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms740506(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">socket</strong></a> or 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms737526(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">accept</strong></a> function.</p>
</dd>
<dt><em>lpBuffer</em> [out]</dt>
<dd>
<p>A pointer to the buffer that receives the data read from a file or device.</p>
<p>This buffer must remain valid for the duration of the read operation. The caller must not use this buffer 
       until the read operation is completed.</p>
</dd>
<dt><em>nNumberOfBytesToRead</em> [in]</dt>
<dd>
<p>The maximum number of bytes to be read.</p>
</dd>
<dt><em>lpNumberOfBytesRead</em> [out, optional]</dt>
<dd>
<p>A pointer to the variable that receives the number of bytes read when using a synchronous 
       <em>hFile</em> parameter. <strong>ReadFile</strong> sets 
       this value to zero  before doing any work or error checking. Use <strong>NULL</strong> for this 
       parameter if this is an asynchronous operation to avoid potentially erroneous results.</p>
<p>This parameter can be <strong>NULL</strong> only when the <em>lpOverlapped</em> 
       parameter is not <strong>NULL</strong>.</p>
<p>For more information, see the Remarks section.</p>
</dd>
<dt><em>lpOverlapped</em> [in, out, optional]</dt>
<dd>
<p>A pointer to an <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms684342(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">OVERLAPPED</strong></a> structure is 
       required if the <em>hFile</em> parameter was opened with 
       <strong>FILE_FLAG_OVERLAPPED</strong>, otherwise it can be <strong>NULL</strong>.</p>
<p>If <em>hFile</em> is opened with <strong>FILE_FLAG_OVERLAPPED</strong>, the 
       <em>lpOverlapped</em> parameter must point to a 
       valid and unique <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms684342(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">OVERLAPPED</strong></a> structure, otherwise the 
       function can incorrectly report that the read operation is complete.</p>
<p>For an <em>hFile</em> that supports byte offsets, if you use this parameter you must specify 
       a byte offset at which to start reading from the file or device. This offset is specified by setting the 
       <strong>Offset</strong> and <strong>OffsetHigh</strong> members of the 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms684342(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">OVERLAPPED</strong></a> structure. For an 
       <em>hFile</em> that does not support byte offsets, <strong>Offset</strong> and 
       <strong>OffsetHigh</strong> are ignored.</p>
<p>For more information about different combinations of <em>lpOverlapped</em> and 
       <strong>FILE_FLAG_OVERLAPPED</strong>, see the Remarks section and the 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(v=vs.85).aspx#synchronization_and_file_position">Synchronization and File Position</a> section.</p>
</dd>
</dl>
<h3>Return value</h3>
<p>If the function succeeds, the return value is nonzero (<strong>TRUE</strong>).</p>
<p>If the function fails, or is completing asynchronously, the return value is zero 
       (<strong>FALSE</strong>). To get extended error information, call the 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetLastError</strong></a> function.
       </p><p class="note"><strong>Note</strong>&nbsp;&nbsp;The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetLastError</strong></a> code 
        <strong>ERROR_IO_PENDING</strong> is not a failure; it designates the read operation is pending 
        completion asynchronously. For more information, see Remarks.</p>

<h3>Remarks</h3>
<p>The <strong>ReadFile</strong> function returns when one of the following 
     conditions occur:
     </p><ul>
<li>The number of bytes requested is read.</li>
<li>A write operation completes on the write end of the 
       pipe.</li>
<li>An asynchronous handle is being used and the read is occurring asynchronously.</li>
<li>An error occurs.</li>
</ul>

<p>The <strong>ReadFile</strong> function may fail with 
    <strong>ERROR_INVALID_USER_BUFFER</strong> or <strong>ERROR_NOT_ENOUGH_MEMORY</strong> whenever 
    there are too many outstanding asynchronous I/O requests.</p>
<p>To cancel all pending asynchronous I/O operations, use either:
     </p><ul>
<li>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363791(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CancelIo</strong></a>—this function only 
       cancels operations issued by the calling thread for the specified file handle.</li>
<li>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363792(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CancelIoEx</strong></a>—this function 
       cancels all operations issued by the threads for the specified file handle.</li>
</ul>

<p>Use <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363794(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CancelSynchronousIo</strong></a> to cancel pending 
     synchronous I/O operations.</p>
<p>I/O operations that are canceled complete with the error <strong>ERROR_OPERATION_ABORTED</strong>.</p>
<p>The <strong>ReadFile</strong> function may fail with 
    <strong>ERROR_NOT_ENOUGH_QUOTA</strong>, which means the calling process's buffer could not be 
    page-locked. For additional information, see 
    <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms686234(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SetProcessWorkingSetSize</strong></a>.</p>
<p>If part of a file is locked by another process and the read operation overlaps the locked portion, this 
    function fails.</p>
<p>Accessing the input buffer while a read operation is using the buffer may lead to corruption of the data read 
    into that buffer. Applications must not read from, write to, reallocate, or free the input buffer that a read 
    operation is using until the read operation completes. This can be particularly problematic when using an 
    asynchronous file handle. Additional information regarding synchronous versus asynchronous file handles can be 
    found in the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(v=vs.85).aspx#synchronization_and_file_position">Synchronization and File Position</a> section and 
    in the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CreateFile</strong></a> reference topic.</p>
<p>Characters can be read from the console input buffer by using 
    <strong>ReadFile</strong> with a handle to console input. The console mode 
    determines the exact behavior of the <strong>ReadFile</strong> function. By 
    default, the console mode is <strong>ENABLE_LINE_INPUT</strong>, which indicates that 
    <strong>ReadFile</strong> should read until it reaches a carriage return. If you 
    press Ctrl+C, the call succeeds, but <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetLastError</strong></a> returns 
    <strong>ERROR_OPERATION_ABORTED</strong>. For more information, see 
    <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CreateFile</strong></a>.</p>
<p>When reading from a communications device, the behavior of 
    <strong>ReadFile</strong> is determined by the current communication time-out as 
    set and retrieved by using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363437(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SetCommTimeouts</strong></a> and 
    <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363261(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetCommTimeouts</strong></a> functions. Unpredictable results can 
    occur if you fail to set the time-out values. For more information about communication time-outs, see 
    <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363190(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">COMMTIMEOUTS</strong></a>.</p>
<p>If <strong>ReadFile</strong> attempts to read from a mailslot that has a 
    buffer that is too small, the function returns <strong>FALSE</strong> and 
    <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetLastError</strong></a> returns 
    <strong>ERROR_INSUFFICIENT_BUFFER</strong>.</p>
<p>There are strict requirements for successfully working with files opened with 
    <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CreateFile</strong></a> using the 
    <strong>FILE_FLAG_NO_BUFFERING</strong> flag. For details see 
    <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/cc644950(v=vs.85).aspx">File Buffering</a>.</p>
<p>If <em>hFile</em> was opened with <strong>FILE_FLAG_OVERLAPPED</strong>, the 
     following conditions are in effect:
     </p><ul>
<li>The <em>lpOverlapped</em> parameter must point to a valid and unique 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms684342(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">OVERLAPPED</strong></a> structure, otherwise the 
       function can incorrectly report that the read operation is complete.</li>
<li>The <em>lpNumberOfBytesRead</em> parameter should be set to 
       <strong>NULL</strong>. Use the 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms683209(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetOverlappedResult</strong></a> function to get the actual 
       number of bytes read. If the <em>hFile</em> parameter is associated with an I/O completion 
       port, you can also get the number of bytes read by calling the 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364986(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetQueuedCompletionStatus</strong></a> function.</li>
</ul>

<h4><a id="synchronization_and_file_position"></a>Synchronization and File Position</h4>
<p>If <em>hFile</em> is opened with <strong>FILE_FLAG_OVERLAPPED</strong>, it is an 
      asynchronous file handle; otherwise it is synchronous. The rules for using the 
      <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms684342(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">OVERLAPPED</strong></a> structure are slightly different for each, 
      as previously noted.</p>
<p class="note"><strong>Note</strong>&nbsp;&nbsp;If a file or device is opened for asynchronous I/O, subsequent calls to functions such as 
      <strong>ReadFile</strong> using that handle generally return immediately, but 
      can also behave synchronously with respect to blocked execution. For more information see 
      <a href="http://go.microsoft.com/FWLink/?LinkId=116863">http://support.microsoft.com/kb/156932</a>.</p>
<p>Considerations for working with asynchronous file handles:</p>
<ul>
<li><strong>ReadFile</strong> may return before the read operation is 
       complete. In this scenario, <strong>ReadFile</strong> returns 
       <strong>FALSE</strong> and the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetLastError</strong></a> 
       function returns <strong>ERROR_IO_PENDING</strong>, which allows the calling process to continue while 
       the system completes the read operation.</li>
<li>The <em>lpOverlapped</em> parameter must not be <strong>NULL</strong> and should 
       be used with the following facts in mind:
       <ul>
<li>Although the event specified in the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms684342(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">OVERLAPPED</strong></a> 
         structure is set and reset automatically by the system, the offset that is specified in the 
         <strong>OVERLAPPED</strong> structure is not automatically 
         updated.</li>
<li><strong>ReadFile</strong> resets the event to a nonsignaled state when 
         it begins the I/O operation.</li>
<li>The event specified in the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms684342(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">OVERLAPPED</strong></a> structure 
         is set to a signaled state when the read operation is complete; until that time, the read operation is 
         considered pending.</li>
<li>Because the read operation starts at the offset that is specified in the 
         <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms684342(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">OVERLAPPED</strong></a> structure, and 
         <strong>ReadFile</strong> may return before the system-level read operation 
         is complete (read pending), neither the offset nor any other part of the structure should be modified, freed, 
         or reused by the application until the event is signaled (that is, the read completes).</li>
<li>If end-of-file (EOF) is detected during asynchronous operations, the call to 
         <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms683209(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetOverlappedResult</strong></a> for that operation 
         returns <strong>FALSE</strong> and 
         <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetLastError</strong></a> returns 
         <strong>ERROR_HANDLE_EOF</strong>.</li>
</ul>
</li>
</ul>
<p>Considerations for working with synchronous file handles:</p>
<ul>
<li>If <em>lpOverlapped</em> is <strong>NULL</strong>, the read operation starts at 
       the current file position and <strong>ReadFile</strong> does not return until 
       the operation is complete, and the system updates the file pointer before 
       <strong>ReadFile</strong> returns.</li>
<li>If <em>lpOverlapped</em> is not <strong>NULL</strong>, the read operation starts 
       at the offset that is specified in the 
       <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms684342(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">OVERLAPPED</strong></a> structure and 
       <strong>ReadFile</strong> does not return until the read operation is 
       complete. The system updates the <strong>OVERLAPPED</strong> offset 
       before <strong>ReadFile</strong> returns.</li>
<li>When a synchronous read operation reaches the end of a file, 
       <strong>ReadFile</strong> returns <strong>TRUE</strong> and sets 
       <code>*lpNumberOfBytesRead</code> to zero.</li>
</ul>
<p>For more information, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CreateFile</strong></a> and 
      <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365683(v=vs.85).aspx">Synchronous and Asynchronous I/O</a>.</p>
<h4><a id="pipes"></a>Pipes</h4>
<p>If an anonymous pipe is being used and the  write handle has been closed, when 
      <strong>ReadFile</strong> attempts to read using the pipe's corresponding read 
      handle, the function returns <strong>FALSE</strong> and 
      <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetLastError</strong></a> returns 
      <strong>ERROR_BROKEN_PIPE</strong>.</p>
<p>If a named pipe is being read in message mode and the next message is longer than the 
      <em>nNumberOfBytesToRead</em> parameter specifies, 
      <strong>ReadFile</strong> returns <strong>FALSE</strong> and 
      <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetLastError</strong></a> returns 
      <strong>ERROR_MORE_DATA</strong>. The remainder of the message can be read by a subsequent call to the 
      <strong>ReadFile</strong> or 
      <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365779(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PeekNamedPipe</strong></a>function.</p>
<p>If the <em>lpNumberOfBytesRead</em> parameter is zero when 
      <strong>ReadFile</strong> returns <strong>TRUE</strong> on a pipe, 
      the other end of the pipe called the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365747(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WriteFile</strong></a> function with 
      <em>nNumberOfBytesToWrite</em> set to zero.</p>
<p>For more information about pipes, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365780(v=vs.85).aspx">Pipes</a>.</p>
<h4><a id="transacted_operations"></a>Transacted Operations</h4>
<p>If there is a transaction bound to the file handle, then the function returns data from the transacted view of 
      the file. A transacted read handle is guaranteed to show the same view of a file for the duration of the 
      handle. For more information, see 
      <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363764(v=vs.85).aspx">About Transactional NTFS</a>.</p>
<h3>Examples</h3>
<p>For a code example that shows you how to test for end-of-file, see 
     <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365690(v=vs.85).aspx">Testing for the End of  a File</a>. For other 
     examples, see 
     <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363875(v=vs.85).aspx">Creating and Using a Temporary File</a> and 
     <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb540534(v=vs.85).aspx">Opening a File for Reading or Writing</a>.</p>

<h3>Requirements</h3>
<table>
<tbody><tr><th>
<p>Minimum supported client</p>
</th><td>Windows&nbsp;XP</td></tr>
<tr><th>
<p>Minimum supported server</p>
</th><td>Windows Server&nbsp;2003</td></tr>
<tr><th>
<p>Header</p>
</th><td>
<dl>
<dt>FileAPI.h (include Windows.h); </dt>
<dt>WinBase.h on Windows Server&nbsp;2008&nbsp;R2, Windows&nbsp;7, Windows Server&nbsp;2008, Windows&nbsp;Vista, Windows Server&nbsp;2003, and Windows&nbsp;XP (include Windows.h)</dt>
</dl>
</td></tr>
<tr><th>
<p>Library</p>
</th><td>
<dl>
<dt>Kernel32.lib</dt>
</dl>
</td></tr>
<tr><th>
<p>DLL</p>
</th><td>
<dl>
<dt>Kernel32.dll</dt>
</dl>
</td></tr>
</tbody></table>
<h3><a id="see_also"></a>See also</h3>
<dl>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363791(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CancelIo</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363792(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CancelIoEx</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363794(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CancelSynchronousIo</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">CreateFile</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364232(v=vs.85).aspx">File Management Functions</a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363261(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetCommTimeouts</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms683209(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetOverlappedResult</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364986(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetQueuedCompletionStatus</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms684342(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">OVERLAPPED</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365779(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PeekNamedPipe</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365468(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">ReadFileEx</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363437(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SetCommTimeouts</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SetErrorMode</strong></a>
</dt>
<dt>
<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365747(v=vs.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WriteFile</strong></a>
</dt>
</dl>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20[fileio\fs]:%20ReadFile%20function%20%20RELEASE:%20(3/12/2012)&body=%0A%0APRIVACY%20STATEMENT%0A%0AThe%20SDK%20team%20uses%20the%20feedback%20submitted%20to%20improve%20the%20SDK%20documentation.%20We%20do%20not%20use%20your%20email%20address%20for%20any%20other%20purpose.%20We%20will%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20you%20are%20reporting%20has%20been%20resolved.%20While%20we%20are%20working%20to%20resolve%20this%20issue,%20we%20may%20send%20you%20an%20email%20message%20to%20request%20more%20information%20about%20your%20feedback.%20After%20the%20issues%20have%20been%20addressed,%20we%20may%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.%0A%0AFor%20more%20information%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
<p>Build date: 3/12/2012</p>
</div>
</div>   
                
                <div class="contentFeedbackContainer">
                



<div id="contentFeedback">
    <form method="post" action="http://msdn.microsoft.com/en-us/library/windows/desktop/feedback/submit/aa365467(v=vs.85).aspx">
    <div id="contentFeedbackContainer">
        <div class="FeedbackTitleContainer">
            <a name="feedback"></a>
        Did you find this helpful?
            <input id="rdIsUsefulYes" name="rdIsUseful" type="radio" value="1" onclick="toggleContentFeedback(&#39;Yes&#39;);"><label for="rdIsUsefulYes">Yes</label>
            <input id="rdIsUsefulNo" name="rdIsUseful" type="radio" value="0" onclick="toggleContentFeedback(&#39;No&#39;);"><label for="rdIsUsefulNo">No</label>
        
        </div>
        
            <div id="contentFeedbackQAContainer">
                
                    <div id="feedbackListNoContainer" class="FeedbackListContainer">
                        
                            <div>
                                <input id="chkbxNo201" name="chkbxNo" type="checkbox" value="201">
                                <label for="chkbxNo201">Not accurate</label>
                            </div>
                        
                            <div>
                                <input id="chkbxNo202" name="chkbxNo" type="checkbox" value="202">
                                <label for="chkbxNo202">Not enough depth</label>
                            </div>
                        
                            <div>
                                <input id="chkbxNo203" name="chkbxNo" type="checkbox" value="203">
                                <label for="chkbxNo203">Need more code examples</label>
                            </div>
                        
                    </div>
                
                <div class="FeedbackTellUsMoreContainer">
                    <textarea id="feedbackText" name="feedbackText" class="TellUsMoreTextBoxSearchLoaded" onfocus="WatermarkFocus(this, &#39;Tell us more...&#39;, &#39;TellUsMoreTextBoxSearch&#39;)" onblur="WatermarkBlur(this, &#39;Tell us more...&#39;, &#39;TellUsMoreTextBoxSearchLoaded&#39;)" onkeydown="TextBoxCharactersCounter(this, document.getElementById(&#39;feedbackTextCounter&#39;), 1500)" onkeyup="TextBoxCharactersCounter(this, document.getElementById(&#39;feedbackTextCounter&#39;), 1500)">Tell us more...</textarea>
                </div>
                <span class="counter">(<span id="feedbackTextCounter">1500</span> characters remaining)</span>
                <input type="hidden" id="returnUrl" name="returnUrl" value="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(v=vs.85).aspx">
                <input type="submit" id="submit" value="Submit" title="Click to Submit Feedback" onclick="WatermarkOnSubmit(document.getElementById(&#39;feedbackText&#39;), &#39;Tell us more...&#39;, &#39;TellUsMoreTextBoxSearch&#39;)">
                <div style="clear: both;"></div>
            </div>  
        
    </div>
    </form>
</div>

                </div>
                 
          </div>
          
<div class="communityContentContainer">
  <div id="CommunityContentHeader" class="communityContentHeader">
    <div class="communityContentHeaderTitleContainer">
      <span class="communityContentHeaderTitle h1">Community Additions</span>
      
        <a class="communityContentAddLink" href="http://msdn.microsoft.com/en-us/library/windows/desktop/community/add/aa365467(v=vs.85).aspx">
          <span class="communityContentAddButton" title="Add">
            ADD
          </span>
        </a>
      
    </div>
    <div style="clear: both">
    </div>
  </div>

      <div class="communityContentAnnotation">
        <a name="13"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            lpBuffer can be an __inout parameter
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          Getting HID input reports with a specific report ID is resolved by placing the wanted report ID to the first byte of the buffer before&nbsp;(!) calling ReadFile(). So it's up to the driver using the buffer for some input.
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/henrik%20haftmann/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar.jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/henrik%20haftmann/">
                Henrik Haftmann</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>2/24/2012</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="14"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            lpNumberOfBytesRead is not optional.
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          Confirming what one of the previous posters said, for expanded circumstances.

I was writing a simple console filter program without using any of the C libraries. Trying to read from the results of GetStdHandle(STD_INPUT_HANDLE) would crash the program immediately under all circumstances no matter what I was sending to the STDIN of the program, until I changed the titular parameter from NULL to the address of a dummy DWORD local variable, which caused the program to magically start working perfectly. 

WriteFile() has similar issues, as well.
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/matthew%20sessions/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(1).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/matthew%20sessions/">
                Matthew Sessions</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>12/7/2011</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="12"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            UNBUFFERED read sizes appear to be required in sector multiples
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          <p>When the file is UNBUFFERED it appears that nNumberOfBytesToRead must be a multiple of sector size.&nbsp; I tried trimming my request size to match file size, expecting this to be best practice, but that resulted in error 0x57 (ERROR_INVALID_PARAMETER).&nbsp; If I just relaxed and rounded up the request size to the next sector, or even made it the size of the (large) buffer and did not worry about trimming it then the errors stopped and it just reported a result size trimmed for me.</p>
<p>No hardship once you know, just a bit unexpected.<br><br></p>
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/tanjb/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(2).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/tanjb/">
                TanjB</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>5/6/2011</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="10"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            Freeing dynamic buffer pointer used with asynchronous ReadFile may lead to heap corruption error
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          If ReadFile operation is not complete in an asynchronous read and you free the buffer used with ReadFile, C++ may show heap corruption error at the end of debug run.<br><br>
For instance,<br><br><b>LPBYTE lpBuffer = new BYTE[buffersize];<br><br>
ReadFile(hFile, lpBuffer, buffersize, NULL, &amp;overlapped); </b><i>// Suppose there is more data to be read and GetLastError is IO_PENDING</i><b><br><br>
delete [] lpBuffer; </b><i>// This will invoke heap corruption prompt</i><b><br></b><br>
To correct this, add '<b>CancelIoEx(hFile, &amp;overlapped);</b>' between ReadFile and delete.<br><br>
-Sanjeev <br><br>
--<br>
you also have to GetOverlappedResult(&amp;overlapped) before deleting the I/O buffer to ensure that the cancellation has completed.<br>
-Raymond
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/raymond%20chen%20-%20msft/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(3).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/raymond%20chen%20-%20msft/">
                Raymond Chen - MSFT</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>2/27/2011</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="11"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            Overlapped I/O Gotcha
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          http://blogs.msdn.com/b/oldnewthing/archive/2011/02/02/10123392.aspx
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/steve%20thresher/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(4).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/steve%20thresher/">
                Steve Thresher</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>2/17/2011</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="9"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            lpNumberOfBytesRead can be set to null only in some cases
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          This post is an edit over previous post stating "lpNumberOfBytesRead cannot be null or a memory exception for trying to writing NULL adress will occur! Someone correct the text.<br>
"Access violation writing location 0x00000000"".<br><br>Unlike what this post states, I successfully read asynchronously from an HID device using ReadFile by setting lpNumberOfBytesRead set to NULL. It seems reading to devices works even if lpNumberOfBytes is NULL.<br><br>-Sanjeev<br>
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/sanje2v/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(5).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/sanje2v/">
                Sanje2v</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>1/9/2010</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="8"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            ReadFile always blocks under Windows 7
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          ReadFile always block even for files opened with FILE_FLAG_OVERLAPPED specified. I'm afraid it's a Windows 7 bug. More information and reproducible test case in this thread: http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/8941dc4b-8c91-406b-884b-36b9d3ad93ab
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/denis%20koroskin/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(6).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/denis%20koroskin/">
                Denis Koroskin</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>12/28/2009</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="7"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            Warning: lpNumberOfBytesRead can not be set to null!
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          As mentioned in another post in this article -<div><br></div><div>to save yourself minutes or hours of irritation, do not set <span><em>lpNumberOfBytesRead</em>  to null!</span></div><div><span><br></span></div><div><span><br></span></div>
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/christoffer/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(7).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/christoffer/">
                Christoffer</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>12/23/2009</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="6"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            Returns TRUE for EOF on a syncronous read
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          When ReadFile attempts to read past the end of a file on a synchronous read operation, ReadFile returns TRUE and GetLastError() returns ERROR_SUCCESS, as stated on the article "Testing for the End of a File":<br><a>http://msdn.microsoft.com/en-us/library/aa365690%28VS.85%29.aspx</a><br><br>The information on the remarks section about this is only true for asynchronous read operations.<br>
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/luis%20bras/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(8).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/luis%20bras/">
                Luis Bras</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>11/9/2009</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="5"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            lpNumberOfBytesRead should be NULL if called asynchronously
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          <p>It is important not to use lpNumberOfBytesRead if ReadFile() is called asynchronously.<br><br>The documentation for lpNumberOfBytesRead says "Use NULL for this parameter if this is an asynchronous operation to avoid potentially erroneous results".<br></p>
<p>The Remarks include this: "If hFile was opened with FILE_FLAG_OVERLAPPED, the following conditions are in effect: &lt;...&gt; The value returned in lpNumberOfBytesWritten is indeterminate". I believe that this is intended to refer to lpNumberOfBytesRead.<br><br></p>
<p>For example, I have a named pipe server on Windows XP SP2 reading a message from a pipe client in a separate process on the same machine. Sometimes, ReadFile() returns FALSE and GetLastError() returns ERROR_MORE_DATA. In this case, *lpNumberOfBytesRead is set to 0.<br><br></p>
<p>Presumably, one calls GetOverlappedResult() to obtain a reliable value for the number of bytes read. If ReadFile() returns FALSE and GetLastError() returns ERROR_IO_PENDING, the operation is pending. It is unclear in various pieces of documentation whether GetOverlappedResult() can be called if the operation is not pending. However, I would have to assume so since even if ReadFile() indicated that the operation is pending and GetOverlappedResult is called ASAP, it may be possible for it no longer to be pending.<br></p>
<p>UNCLEAR GetOverlappedResult() DOCUMENTATION 1:<br><br></p>
<p>GetOverlappedResult Function (Windows)<br><a>http://msdn.microsoft.com/en-us/library/ms683209.aspx<br><br></a></p>
<p>"The results reported by the GetOverlappedResult function are those of the specified handle's last overlapped operation to which the specified OVERLAPPED structure was provided, and for which the operation's results were pending."<br><br></p>
<p>The key phrase is "for which the operation's results were pending". What if the results were not pending?<br><br></p>
<p>UNCLEAR GetOverlappedResult() DOCUMENTATION 2:<br><br></p>
<p>Asynchronous Disk I/O Appears as Synchronous on Windows NT, Windows 2000, and Windows XP<br><a>http://support.microsoft.com/kb/156932<br><br></a></p>
<p>"Note that &amp;NumberOfBytesRead passed into ReadFile is different from &amp;NumberOfBytesTransferred passed into GetOverlappedResult. If an operation has been made asynchronous, then GetOverlappedResult is used to determine the actual number of bytes transferred in the operation after it has completed. The &amp;NumberOfBytesRead passed into ReadFile is meaningless. <br><br></p>
<p>If, on the other hand, an operation is completed immediately, then &amp;NumberOfBytesRead passed into ReadFile is valid for the number of bytes read. In this case, ignore the OVERLAPPED structure passed into ReadFile; do not use it with GetOverlappedResult or WaitForSingleObject".<br><br></p>
<p>The key phrase here is do not use it with GetOverlappedResult". Is that because it is not necessary? Or is it because it is unreliable to do so?</p>
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/paul%20baker/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(9).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/paul%20baker/">
                Paul Baker</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>6/12/2009</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="4"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            ERROR_HANDLE_EOF not returned
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          After installing the XP service pack 3 on a FAT32 file system the ReadFile() function does not return FALSE when I try to read past end of the file. nNumberOfBytesToRead is greater than zero and lpNumberOfBytesRead is set to zero when the function returns. But the function returns TRUE and GetLastError() returns ERROR_SUCCESS.
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/alessandro%20antonello/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(10).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/alessandro%20antonello/">
                Alessandro Antonello</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>5/29/2009</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="3"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            ERROR_HANDLE_EOF can be returned also on synchronous read
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          if lpOverlapped is not NULL and read is synchronous (positioned read , that uses lpOverlapped only to specify the offset), ReadFile at the end of file will return FALSE and GetLastError() will return ERROR_HANDLE_EOF.
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/wva/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(11).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/wva/">
                wva</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>9/12/2008</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="2"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            lpNumberOfBytesRead not optional
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          In at least some cases, you cannot set this to NULL.  The Fault is very low level and hard to catch with a debugger.  The header definition should be changed to reflect this (or at least the bad cases defined).  My error was on a regular NTFS file on Vista.
							 
						
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/doug%20dumitru/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(12).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/doug%20dumitru/">
                Doug Dumitru</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>4/14/2008</span>
                
            </div>
          </div>
        </div>
      </div>
  
      <div class="communityContentAnnotation">
        <a name="1"></a>
        <div class="communityContentAnnotationTitle h3">
          <span>
            behavior when nNumberOfBytesToRead == 0
          </span>
        </div>
        <div class="communityContentAnnotationBody">
          <p>When ReadFile() is called with nNumberOfBytesToRead set to zero (0), it returns TRUE (success), sets *lpNumberOfBytesRead to 0, and GetLastError() return ERROR_SUCCESS; otherwise applications may have trouble telling this appart from the EOF condition.</p>
<p>Note that this is for a ReadFile to NTFS: ReadFile on a pipe might return 0 bytes read successfully if the other side of the pipe called WriteFile with 0 bytes.</p>
        </div>
        <div class="communityContentAnnotationInfo">
          <div class="communityContentAnnotationAvatarContainer">
            <a class="communityContentAnnotationAvatar" href="http://social.msdn.microsoft.com/profile/austin%20donnelly%20msft/" title=""><img alt="" height="34" src="./ReadFile function_files/avatar(13).jpg" width="34"></a>
          </div>
          <div class="communityContentAnnotationUserDateContainer">
            <div class="communityContentAnnotationUserContainer">
              <a href="http://social.msdn.microsoft.com/profile/austin%20donnelly%20msft/">
                Austin Donnelly MSFT</a>
            </div>
            <div class="communityContentAnnotationDateContainer">
              <span>12/6/2007</span>
                
            </div>
          </div>
        </div>
      </div>
  
</div>
          
        </div>
        <div class="footerContainer">
            
<div class="footer">
    
    <div class="blocks">
        <div class="footerPrimaryBlock">
            <div class="footerLinksTitles">Network sites</div>
            <div style="padding-top: 5px; padding-bottom: 14px;"><a href="http://msdn.microsoft.com/" title="MSDN"><img alt="MSDN" class="footerLogoImage" src="./ReadFile function_files/9fb7513b997d4c98cf5e8cd26eea2387.png"></a></div>
            <div style="padding-bottom: 71px;">
                <span class="footerLinks">
                    
                </span>
            </div>
        </div>
        
        <div class="footerSubBlock">&nbsp;</div><div class="footerSubBlock">
            <div class="footerLinksTitles">Windows Dev Center</div>
                <div style="padding-top: 5px;" class="footerLinks"><a href="http://msdn.microsoft.com/en-us/windows" title="Windows Dev Center home">Windows Dev Center home</a></div><div style="padding-top: 5px;" class="footerLinks"><a href="http://msdn.microsoft.com/en-us/windows/apps" title="Metro style apps">Metro style apps</a></div><div style="padding-top: 5px;" class="footerLinks"><a href="http://msdn.microsoft.com/en-us/ie" title="Internet Explorer">Internet Explorer</a></div><div style="padding-top: 5px;" class="footerLinks"><a href="http://msdn.microsoft.com/en-us/windows/desktop" title="Desktop">Desktop</a></div><div style="padding-top: 5px;" class="footerLinks"><a href="http://msdn.microsoft.com/en-us/windows/hardware" title="Hardware">Hardware</a></div>
            </div>

        <div class="footerFinalBlock">
            <div class="footerLinksTitles">Other links</div><div style="padding-top: 5px;" class="footerLinks"><a href="http://msdn.microsoft.com/en-us/windows/desktop/aa905013" title="Support">Support</a></div><div style="padding-top: 5px;" class="footerLinks"><a href="https://connect.microsoft.com/dashboard/" title="Microsoft Connect">Microsoft Connect</a></div>
        </div>
    </div>
    
    <div class="footerMSLogo">
        <div class="clip104x17">
        <img src="./ReadFile function_files/5b56267bbca66252c725ca7ab4fdea87.png" class="footerMsLogo" title="Microsoft" alt="Microsoft">
        </div>
    </div>
    <div class="footerSubLinksContainer">
        <div class="footerSubLinks">
          <a href="http://msdn.microsoft.com/en-us/windows/desktop/cc300389" title="Terms of use">Terms of use</a>
          <span class="footerSubLinksDivider">|</span>
          <a href="http://www.microsoft.com/library/toolbar/3.0/trademarks/en-us.mspx" title="Trademarks">Trademarks</a>
          <span class="footerSubLinksDivider">|</span>
          <a href="http://www.microsoft.com/info/privacy.mspx" title="Privacy statement">Privacy statement</a>
          <span class="footerSubLinksDivider">|</span>
          <a href="https://lab.msdn.microsoft.com/mailform/contactus.aspx?refurl=%2fen-us%2flibrary%2fwindows%2fdesktop%2faa365467(v%3dvs.85).aspx" title="Site feedback" target="_blank" onclick="SiteFeedbackNewWindow(&#39;https://lab.msdn.microsoft.com/mailform/contactus.aspx?refurl=%2fen-us%2flibrary%2fwindows%2fdesktop%2faa365467(v%3dvs.85).aspx&#39;); return false;">Site feedback</a>
          <span class="footerSubLinksDivider">|</span>
          <a href="http://msdn.microsoft.com/en-us/windows/desktop/SelectLocale?fromPage=%2flibrary%2fwindows%2fdesktop%2faa365467.aspx" title="United States (English)">United States (English)</a>
        </div>
        <div class="footerCopyright" title="© 2012 Microsoft. All rights reserved.">© 2012 Microsoft. All rights reserved.</div>
    </div>
</div>

        </div>
    </div>
<!--[CDATA[ Third party scripts and code linked to or referenced from this website are licensed to you by the parties that own such code, not by Microsoft.  See ASP.NET Ajax CDN Terms of Use – http://www.asp.net/ajaxlibrary/CDN.ashx. ]]-->
<script type="text/javascript" src="./ReadFile function_files/Combined.js" xmlns="http://www.w3.org/1999/xhtml"></script>

<div id="-chrome-auto-translate-plugin-dialog" style="display: none;opacity: 1 !important;border-color: none !important;background: transparent !important;padding: 0 !important;margin: 0 !important;position: absolute !important;top: 0;left: 0;overflow: visible !important;z-index: 999999 !important;text-align: left !important;"><div style="max-width: 300px !important;color: #fafafa !important;opacity: 0.8 !important;border-color: #000000 !important;border-width: 0px !important;-webkit-border-radius: 10px !important;background-color: #363636 !important;font-size: 16px !important;padding: 8px !important;overflow: visible !important;background-image: -webkit-gradient(linear, left top, right bottom, color-stop(0%, #000), color-stop(50%, #363636), color-stop(100%, #000));z-index: 999999 !important;text-align: left  !important;"><div class="translate"></div><div class="additional"></div></div><img src="./ReadFile function_files/small-logo.png" onclick="document.location.href=&#39;http://translate.google.com/&#39;;" style="position: absolute !important; z-index: -1 !important; right: 1px !important; top: -20px !important; cursor: pointer !important;-webkit-border-radius: 20px; background-color: rgba(200, 200, 200, 0.3) !important; padding: 3px 5px 0 !important; margin: 0 !important;"></div><script src="./ReadFile function_files/broker-config.js"></script><div style="display: none; " id="_WEDCSInsertedData"><iframe id="_msnFrame" src="./ReadFile function_files/Sync.htm" style="z-index:-1;height:1px;width:1px;display:none;visibility:hidden;" onload="javascript:MscomBeacon();"></iframe></div></body><span id="skype_highlighting_settings" display="none" autoextractnumbers="1"></span><object id="skype_plugin_object" location.href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(v=vs.85).aspx" location.hostname="msdn.microsoft.com" style="position: absolute; visibility: hidden; left: -100px; top: -100px; " width="0" height="0" type="application/x-vnd.skype.click2call.chrome.5.7.0"></object></html>